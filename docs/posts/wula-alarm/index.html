<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  lang="en-us">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<title>Why I Will Never Miss an 8 am Ever Again | Al Masgai</title>


<link rel="stylesheet" href="http://masgai.com//css/style.css"/><link rel='stylesheet' href='/css/custom.css'></head>



<body>

<section class="section">
  <div class="container">
    <nav class="nav">
      <div class="nav-left">
        <a class="nav-item" href="http://masgai.com/"><h1 class="title is-4">Al Masgai</h1></a>
      </div>
      <div class="nav-right">
        <nav class="nav-item level is-mobile"><a class="level-item" href='mailto:alex.masgai@gmail.com' target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
    <polyline points="22,6 12,13 2,6"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" href='https://github.com/almasgai' target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" href='https://linkedin.com/in/alex-masgai' target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path stroke-width="1.8" d="m5.839218,4.101561c0,1.211972 -0.974141,2.194011 -2.176459,2.194011s-2.176459,-0.982039 -2.176459,-2.194011c0,-1.211094 0.974141,-2.194011 2.176459,-2.194011s2.176459,0.982917 2.176459,2.194011zm0.017552,3.94922l-4.388022,0l0,14.04167l4.388022,0l0,-14.04167zm7.005038,0l-4.359939,0l0,14.04167l4.360816,0l0,-7.370999c0,-4.098413 5.291077,-4.433657 5.291077,0l0,7.370999l4.377491,0l0,-8.89101c0,-6.915523 -7.829986,-6.66365 -9.669445,-3.259423l0,-1.891237z"/>
    
  </svg></i>
            </span>
          </a></nav>
      </div>
    </nav>
  </div>
</section>
<section class="section">
  <div class="container">
    <div class="subtitle is-6 is-pulled-right">
      
      
<a class="subtitle is-6" href="/tags/arduino">#arduino</a>



  
  | <a class="subtitle is-6" href="/tags/diy">#DIY</a>
  

      
    </div>
    <h2 class="subtitle is-6">March 1, 2018</h2>
    <h1 class="title">Why I Will Never Miss an 8 am Ever Again</h1>
      
    <div class="content">
      

<h2 id="solving-a-common-college-student-problem">Solving a Common College Student Problem:</h2>

<p>Like most people, I enjoy sleep. A lot. Maybe too much. Waking up early in the
morning is a herculean task since I&rsquo;m a heavy sleeper. But I&rsquo;m also taking an 8am
class this semester and don&rsquo;t want to sleep in. I decided that between my knowledge on
programming and electronics, I could somehow solve my problem.</p>

<p>I had my &lsquo;eureka&rsquo; moment about two weeks ago while watching a <a href="https://www.youtube.com/watch?v=qlMtakaa7u8">YouTube video</a>
on creating flexible LED panels. I thought that waking up would be easier if
I could turn on a light panel above my bed in the morning. And this is where my
quest to making waking up earlier easier.</p>

<h2 id="parts-list">Parts List</h2>

<p>Below are all the parts I used, most of which are similar to what you can find
in the video</p>

<ul>
<li><a href="https://www.amazon.com/gp/product/B00HSF64JG/ref=oh_aui_detailpage_o07_s01?ie=UTF8&amp;psc=1">LED Light Strip</a>: Personally I chose to use &lsquo;warm&rsquo; white to emulate natural
sunlight</li>
<li><a href="https://www.amazon.com/gp/product/B00JLPQKFO/ref=oh_aui_detailpage_o05_s00?ie=UTF8&amp;psc=1">Fake Leather</a>: Used this as the panel since pleather is flexible, strong, and most
importantly cheap!</li>
<li><a href="https://www.amazon.com/Adapter-Arduino-Tbuymax-Listed-Positive/dp/B06Y1LF8T5/ref=sr_1_3?ie=UTF8&amp;qid=1519933043&amp;sr=8-3&amp;keywords=arduino+power+supply&amp;dpID=51%252BmVpNs4eL&amp;preST=_SY300_QL70_&amp;dpSrc=srch">Power Source</a>: Used to power the Arduino and light panel.</li>
<li><a href="https://www.amazon.com/gp/product/B00CHTLAIS/ref=oh_aui_detailpage_o01_s01?ie=UTF8&amp;psc=1">MOSFET</a>: Used to control the 12V LED lights. Using this allows the Arduino to pump
out more electricity to the lights without frying the Arduino board when using a
12V power supply. The LED lights still work using at 75% power using the power
supply above. I used the power supply listed above because was something that I
already had in my room and was satified with how bright it was.</li>
<li><a href="https://www.amazon.com/gp/product/B01B0Y06SA/ref=oh_aui_detailpage_o02_s05?ie=UTF8&amp;psc=1">Aluminum Wire</a>:
This is used to help the panel maintain its form. The wires are easy to bend, but
hard to break. Perfect for the panel.</li>
</ul>

<p>Miscellaneous parts that most electronic enthusiasts already have:</p>

<ul>
<li>Soldering Iron</li>
<li>Solder Wire</li>
<li>Red(+) &amp; Black(-) Wire</li>
<li>Wire Cutter</li>
<li>Smoke Fan with Carbon Filter</li>
<li>Hot Glue Gun</li>
</ul>

<p>After gathering all the parts, I got down to work!
<center><img src="/images/wula/one.jpg" alt="Image 1" /></center></p>

<h2 id="first-things-first">First Things First</h2>

<p>I wanted to make my panel rectangular so that when the light shines at 7 in the
morning, it would cover my entire field of vision and (hopefully) wake up. I
decided to make each strip 18 LED lights long. I then cut pleather to make a
lightweight, flexible panel panel.</p>

<p><center>
<img src="./images/wula/two.jpg" alt="Panel" />
<em>Cut up and wired the strips pasted them across the pleather panel.</em>
</center>
<br></p>

<p>It wasn&rsquo;t too long until I hit my first roadblock,
which was soldering. I found the culprit, or should I say culprits. The first problem
was I placed the LED light strips too close together. The second issue was the
red and black wiring was too stiff and wouldn&rsquo;t stay bent since the I was bending
them too sharply. This caused the thick wires to literally rip the soldering wire
off of the LED light panels.</p>

<p>I rearranged space between the strips so that 1) soldering the wires together
became much easier, 2) bending the positive and negative wires wouldn&rsquo;t be under
enough stress to rip the metal off the strips again and 3) to provide a larger area
of light output.</p>

<h2 id="let-there-be-light">Let There Be Light!</h2>

<p>I held my breath while I plugged the power supply into the socket&hellip; and it worked!
Or at least the first three rows. The positive and negative wires were soldered
together on the fourth row by accident that cut the circuit short. Whoops. After
resoldering, everything worked perfectly.</p>

<p>My next step was to add the aluminum wire to the panel. This would allow the
flimsy panel to hold its form when manipulating it. This was accomplished by
cutting the wire slightly shorted than the perimeter of the panel. I then used
a hot glue gun to make the wiring stay put. Lastly, I folded the fake leather
over aluminum wire so that it was hidden. Again, I used a hot glue gun to keep
this leather down so that the wiring would remain concealed.</p>

<p>I then made slits where the strips ended on the opposite end of where the
soldering was done. This helped hide where the positive and negative ends were
exposed. I also made a small cut where the power adapter was and threaded the
power adapter through the hole so that it would remain hidden from the front view.</p>

<p><center>
  <img src="/images/wula/three.jpg" alt="Hideous!" />
  <em>The Arduino-less panel unit. I unfortunately could not find an effective to hide those hideous wires.</em>
</center></p>

<p>After testing out the lights one last time to ensure that everything was working,
I switched over to the software side of things.</p>

<h2 id="a-simple-microcontroller-for-a-simple-task-arduino-uno">A Simple Microcontroller for a Simple Task: Arduino Uno</h2>

<p><center>
    <img src="/images/wula/logo.svg" alt="Logo" />
    <em>Arduino Logo</em>
</center>
<br></p>

<p>Keeping my costs down was my number one priority. Originally, I thougt about using
an STM32 but I already had a spare Arduino Uno laying around so I thought it was
about time putting it to use. I had an Arduino Mega2560 as well but thought it
would be a little bit overkill since has more I/O pins than I know what to do with
and has more horsepower needed for this particular project, so I settled with the</p>

<p>Programming it was straightforward. I needed to get acquainted with two libraries:
<a href="https://github.com/PaulStoffregen/Time">TimeLib</a> &amp; <a href="https://github.com/PaulStoffregen/TimeAlarms">TimeAlarms</a>. TimeLib is used for timekeeping functionality, which would
help me keep track of the time that has passed between each day. TimeAlarms would
allow the Arduino to do a specific task based on what time it is. The documentation
for each respective library was straightforward and easy to follow. Along with
<a href="https://learn.adafruit.com/rgb-led-strips?view=all">Adafruit&rsquo;s guide on LED strips</a>,
I was able to write up a relatively simple program below:</p>

<pre><code class="language-Arduino">#include &lt;TimeLib.h&gt;
#include &lt;TimeAlarms.h&gt;

#define PIN 10            // control pin
#define DELAY 10          // 20ms internal delay; increase for slower fades

int long countDown = 1800 * 1000;

void setup() {

  pinMode(PIN, OUTPUT);

  // Setting time format (24 hour):
  // HOUR, MINS, SECS, MONTH, DAY, YEAR (20XX)
  setTime(00, 13, 00, 3, 1, 18);

  // Setting up when the alarm should go off
  Alarm.alarmRepeat(6, 45, 00, fade);


}

void loop() {
  Alarm.delay(1000); // wait one second between clock display
}

void fade() {

while(countDown != 0){

  delay(1000);
    // fade in
    for(int i=0; i&lt; 255; i++) {
      analogWrite(PIN, i);
      delay(DELAY);
    }

    // fade out
    for(int i=0; i&lt; 255; i++) {
      analogWrite(PIN, 255 - i);
      delay(DELAY);
    }

    countDown -= 5000;
  }

  countDown = 2700 * 1000;
  analogWrite(PIN, LOW);
}
</code></pre>

<p><center>
  <img src="/images/wula/four.jpg" alt="Anotha One" />
  <em>Working on the Arduino program and testing it out on panel.</em>
</center></p>

<h2 id="piecing-things-together">Piecing Things Together</h2>

<p>My next step was bringing the project together. I connected pin 9 (PWM) to the source
of the MOSFET. It is important to use a pin with a tilde(~) next to it. These pins
support <a href="https://www.arduino.cc/en/Tutorial/PWM">pulse width modulation</a> which allow
the light to dim the LED lights by getting analog results from digital mean. Of
course, one can have it so that the lights turn on as bright as they can without
the pulsating fading effect but I opted for these effects because I thought it
would be easier to wake up to. To each their own for lighting methods!</p>

<p>I then connected this pin to the source terminal of the MOSFET by soldering the
ends together using some soldering wire. This was a little tedious since I had to
solder outside (no soldering allowed in the residence hall) in 40° weather where
the soldering wire was reluctant to melt and keep this composition while I managed
to merge the two ends together. After more attempts than I would like to admit,
I finally got it.</p>

<p>Next I decided to solder the gate terminal to a jumper wire connected to negative
wire that directly feed into the negative end of the LED lights. I then connected
drain terminal to the GND pin on the Arduino. Lastly, I connected the positive red
wire from the LED strip to the VIN pin which powers the panel with 9V of electricity.</p>

<h2 id="tying-up-the-loose-ends">Tying Up the Loose Ends</h2>

<p><center>
  <img src="./images/wula/five.jpg" alt="Putting it together" />
  <em>Added those strange loops to panel here using glue gun. Soldered the wiring up between the panel and Arduino as well, making it one unit.</em>
</center></p>

<p>From a functional stand point, my product worked and was 100% complete. Structurally
speaking, there was still work left to be done. I wanted to suspend my LED panel
above my bed but initially had no clear way of doing so. I eventually decided to
create loops out of my pleather that I would thread some cheap string through. I
held down the loops using my hot glue gun and was able to suspend it all with string
that was connected to a nail above my bed.</p>

<p>My wiring was a little hectic so I decided to use zip ties to organize them better.
I then glued my Arduino to the back of the LED panel so it was out of sight and
securely attached to the back side. I have included some pictures below this article
to show exactly what I am talking about.</p>

<h2 id="conclusion">Conclusion</h2>

<p>Overall, I learned a lot through this project. I had recently began looking for
ways in my own life to solve any problems I might have through technology and I
accomplished my goal. I explored two new and very practical libraries that may
come handy somewhere down the line and I few like I have a pretty solid understanding
of basic electronics. Now waking up isn&rsquo;t so bad and I won&rsquo;t be sleeping in anymore
8am classes, at least I hope not!</p>

<p><center><img src="/images/wula/vid.gif" alt="Panel in Action" />
<em>Animation of what the fading effect looks like.</em>
</center></p>

    </div>
    
  </div>
</section>


<section class="section">
  <div class="container has-text-centered">
    <p></p>
    
  </div>
</section>

</body>
</html>
